[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ISSS626-yiqiong-pan",
    "section": "",
    "text": "Welcome to ISSS626 Geospatial Analytics and Applications. In this website, you will find my coursework prepared for this course."
  },
  {
    "objectID": "In-class_Ex/In-class_Ex03/In-class_Ex03b.html",
    "href": "In-class_Ex/In-class_Ex03/In-class_Ex03b.html",
    "title": "In-class Exercise 3b: Tidy Government Data",
    "section": "",
    "text": "pacman::p_load(tidyverse, sf, tmap, httr)\n\n\nfolder_path &lt;- \"data/aspatial/acra\"\nfile_list &lt;- list.files(path = folder_path,\n                        pattern = \"^ACRA.*\\\\csv$\",\n                        full.names = TRUE)\n\nacra_data &lt;- file_list %&gt;%\n  map_dfr(read_csv)\n\n\nwrite_rds(acra_data, \"data/rds/acra_data.rds\") #rds not csv to avoid changing of field names..\n\nmake sure the month ends at June.\n\nbiz_56111 &lt;- acra_data %&gt;%\n  select(1:24) %&gt;%\n  filter(primary_ssic_code == 56111) %&gt;%\n  rename(date = registration_incorporation_date) %&gt;%\n  mutate(date = as.Date(date),\n         YEAR = year(date),\n         MONTH_NUM = month(date),\n         MONTH_ABBR = month(date, label = TRUE, abbr = TRUE),\n         postal_code = str_pad(postal_code, width = 6, side = \"left\", pad = \"0\")) %&gt;%\n  filter(YEAR == 2025, MONTH_NUM &lt;= 6)     \n\n\npostcodes &lt;- unique(biz_56111$postal_code)\nurl &lt;- \"https://onemap.gov.sg/api/common/elastic/search\"\n\nfound &lt;- data.frame()\nnot_found &lt;- data.frame(postcode = character())\n\nfor (pc in postcodes) {\n  query &lt;- list(\n    searchVal = pc,\n    returnGeom = \"Y\",\n    getAddrDetails = \"Y\",\n    pageNum = \"1\"\n  )\n  \n  res &lt;- GET(url, query = query)\n  json &lt;- content(res)\n  \n  if (json$found != 0) {\n    df&lt;- as.data.frame(json$results, stringsAsFactors = FALSE)\n    df$input_postcode &lt;- pc\n    found &lt;- bind_rows(found,df)\n  } else {\n    not_found &lt;- bind_rows(not_found, data.frame(postcode = pc))\n  }\n}\n\n\nbiz_56111 = biz_56111 %&gt;%\n  left_join (found,\n             by = c('postal_code'= 'POSTAL'))\n\n\nbiz_56111 &lt;- st_as_sf(biz_56111,\n                      coords = c(\"X\",\"Y\"),\n                      crs = 3414)"
  }
]